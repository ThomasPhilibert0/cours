#! /usr/bin/env python
# -*- coding: utf-8 -*-

import numpy as np
import matplotlib.pyplot as plt

import methodes
import equations

t0,y0 = 0.,0.
T = 1.
h = 0.2

#Définition de la boucle for
for i in range(0,6,1) :
    N = int(T/h) #Nombre d'itérations

    [t,y1] = methodes.euler_explicite(t0,h,N,y0,equations.f_poly)

    # Solution exacte aux mêmes instants
    z1 = equations.sol_poly(t,y0)

    # Calcul de l'erreur maximum relative
    np.max(np.abs((z1-y1)/z1))
    

# Graphe des solutions exactes et approchées
#plt.plot(t,y1,'b-+',label='solution approchée h=0.1')
#plt.plot(t,z1,'r-',label='solution exacte')
#plt.xlabel('t')
#plt.ylabel('y')
#plt.title("Méthode d'Euler explicite")
#plt.legend()
#plt.savefig('eq_affine.png')

# Écriture de l'erreur en fonction de h
    print("{0} | {1}".format(h,e1))

    plt.plot(h,e1,'b-+',label = 'Pour h = '+ str(h))

    h = h/2

plt.xscale('log')
plt.yscale('log')
plt.xlabel('h')
plt.ylabel('e1')
plt.title("Erreur en fonction du pas h")
plt.legend()
plt.show()
